<?php

################################################################################
# PHP Suchscript - Version 2.5.27                                              #
# copyright webdesign weisshart                                                #
# http://webdesign.weisshart.de                                                #
# dieser copyright Hinweis darf nicht entfernt werden!                         #
#                                                                              #
# Sie koennen dieses Script kostenlos einsetzen,                               #
# solange Sie die Links auf webdesign.weisshart.de unveraendert intakt lassen. #
# Wenn Sie die Links auf webdesign.weisshart.de entfernen wollen,              #
# koennen Sie eine Lizenz erwerben bei                                         #
# http://webdesign.weisshart.de/suchen-lizenz.php                              #
################################################################################

include("search_config.php");

$NCiR0aW1lX29sZCA9IDA7IC8vIGb8ciBkaWUgRm9ydHNjaHJpdHRzYW56ZWlnZQNCiR0aW1lX29sZCA9IDA7IC8vIGb8ciBkaWUgRm9ydHNjaHJpdHRzYW56ZWlnZQ="Ly8gTmV0dCwgZGFzcyBTaWUgc2ljaCBmdWVyIG1laW5lbiBzb3VyY2Vjb2RlIGludGVyZXNzaWVyZW4uIERlciBMaW5rIGF1ZiB3ZWJkZXNpZ24ud2Vpc3NoYXJ0LmRlIGRhcmYgbnVyIG5hY2ggRXJ3ZXJiIGVpbmVyIExpemVueiBlbnRmZXJudCB3ZXJkZW4hCi8vIEBpbmlfc2V0KCdkaXNwbGF5X2Vycm9ycycsICcxJyk7CgoKCnNldGxvY2FsZSAoTENfQ1RZUEUsICdkZV9ERScpOyAvLyBzdHJ0b2xvd2VyIGF1Y2ggbWl0IFVtbGF1dGVuIC0gYWJlciBhbnNjaGVpbmVuZCBuaWNodCB1bnRlciBQSFAgNS40CgoKaWYgKCFAaW5pX2dldCgnc2FmZV9tb2RlJykpIEBzZXRfdGltZV9saW1pdCg0NSk7CiRtdGltZSA9IG1pY3JvdGltZSgpOyAkbXRpbWUgPSBleHBsb2RlKCAnICcsICRtdGltZSk7ICRtdGltZSA9ICRtdGltZVsxXSArICRtdGltZVswXTsKJHN1Y2hfc3RhcnQgPSAkbXRpbWU7CgokdmVyc2lvbj0gJzwhLS0gVmVyc2lvbiAyLjUuMjcgLS0+JzsKCgppZiAocGhwdmVyc2lvbigpIDwgJzQuMy4wJykgewoJZWNobyAiPHA+RGllc2VzIFNjcmlwdCBlcmZvcmRlcnQgUEhQIFZlcnNpb24gNC4zLjAgb2RlciBoJm91bWw7aGVyITxiciAvPiI7CgllY2hvICJhdWYgSWhyZW0gU2VydmVyIGwmYXVtbDt1ZnQgYWJlciBQSFAgVmVyc2lvbiAiLnBocHZlcnNpb24oKS4iLjwvcD4iOwoJZXhpdDsKfQoKJG1ldGhvZCA9ICRfU0VSVkVSWydSRVFVRVNUX01FVEhPRCddOwoKJGFycmF5ID0gIiI7CiRhdXNnYWJlID0iIjsKJGZvdW5kID0gMDsKJGUgPSAiIjsKJHNvcnRoaW53ZWlzID0gIiI7CiRsaW5rID0gIiI7CiRkdXJjaHN1Y2h0ID0gMDsKJGJlcmVpdHNfZm91bmQgPSBhcnJheSgpOyAKCgppZiAoIWlzc2V0KCRwbHVyYWwpKXsKCSRwbHVyYWwgPSAibiI7Cn0KCi8vaWYgKCFpc3NldCgkcHVuY3QpKXskcHVuY3QgPSAibm8iO30KCmlmICghaXNzZXQoJG1heG1zZykpewoJJG1heG1zZyA9IDEwMDsKfQoKaWYgKCFpc3NldCgkZGF0ZWZvcm0pKXsKCSRkYXRlZm9ybSA9ICJkZSI7Cn0KCmlmICghaXNzZXQoJHN1Y2hkYXVlcikpewoJJHN1Y2hkYXVlciA9ICJTZWt1bmRlbiI7Cn0KCmlmICghaXNzZXQoJGJlc2NocmVpYikpewoJJGJlc2NocmVpYiA9ICJCZXNjaHJlaWJ1bmc6ICI7Cn0KCmlmICghaXNzZXQoJHRyZWZmKSl7CgkkdHJlZmYgPSAiVHJlZmZlciI7Cn0KCmlmICghaXNzZXQoJGZpbGVkYXRlKSl7CgkkZmlsZWRhdGUgPSAienVsZXR6dCBnZSZhdW1sO25kZXJ0IGFtICI7Cn0KCmlmICghaXNzZXQoJG5vcmVzdWx0KSl7Cgkkbm9yZXN1bHQgPSAiPHA+PGJyIC8+RXMgd3VyZGVuIGxlaWRlciBrZWluZSBleGFrdGVuICZVdW1sO2JlcmVpbnN0aW1tdW5nZW4gbWl0IGRlbSBlaW5nZWdlYmVuZW4gU3VjaGJlZ3JpZmYgZ2VmdW5kZW4uPGJyIC8+VmllbGxlaWNodCB3b2xsZW4gU2llIGVzIG1pdCBlaW5lbSBhbGxnZW1laW5lcmVuIFN1Y2hiZWdyaWZmIHZlcnN1Y2hlbi48L3A+IjsKfQoKaWYgKCFpc3NldCgkdm9yc2NobGFnKSl7Cgkkdm9yc2NobGFnID0gIk9kZXIgU2llIHZlcnN1Y2hlbiBlcyBlaW5mYWNoIG1hbCBtaXQiOwp9CgppZiAoIWlzc2V0KCRtaW5sZW5ndGgpKXsKCSRtaW5sZW5ndGggPSAiPHA+PGJyIC8+R2ViZW4gU2llIGJpdHRlIGVpbmVuIFN1Y2hiZWdyaWZmIHZvbiBtaW5kZXN0ZW5zJm5ic3A7Ii4kbGVuZ3RoLiImbmJzcDtCdWNoc3RhYmVuIEwmYXVtbDtuZ2UgZWluLjwvcD4iOwp9CgoKCmlmICghaXNzZXQoJGlmcmFtZSkpewogICAkaWZyYW1lPWZhbHNlOwp9CgppZiAoIWlzc2V0KCR0YXJnZXR3YWhsKSl7CiAgICR0YXJnZXR3YWhsPWZhbHNlOwp9CgppZiAoIWlzc2V0KCRleGNsdWRlX3N0cmluZ3MpKXsKICAgJGV4Y2x1ZGVfc3RyaW5ncyA9IGFycmF5KCk7Cn0KCmlmICghaXNzZXQoJGluc3RhbGxhdGlvbl9wYXRoKSkgewoJJGluc3RhbGxhdGlvbl9wYXRoID0gIndkd19zdWNoZSI7Cn0KCmlmICghaXNzZXQoJGVuY29kaW5nKSkgewoJJGVuY29kaW5nID0gIklTTyI7Cn0KCmlmICghaXNzZXQoJHRodW1iX3JlcGxhY2UpKSB7CgkkdGh1bWJfcmVwbGFjZSA9ICJfc3MuanBnIjsKfQoKJGxpc3RfaHhfc3RhcnQgPSAkbGlzdF9oeF9lbmQgPSAiIjsKaWYgKGlzc2V0KCRsaXN0X2h4KSAmJiBpc19udW1lcmljKCRsaXN0X2h4KSkgewoJJGxpc3RfaHhfc3RhcnQgPSAnPGgnLiRsaXN0X2h4Lic+JzsKCSRsaXN0X2h4X2VuZCAgID0gJzwvaCcuJGxpc3RfaHguJz4gJzsKfQoKaWYgKCFpc3NldCgkaHhfc3VjaHRpcCkgfHwgIWlzX251bWVyaWMoJGh4X3N1Y2h0aXAgKSkgewoJJGh4X3N1Y2h0aXAgPSAzOwp9CgoKCi8vIHZlcmJvdGVuZSBaZWljaGVuCiRleGNsdWRlX3N0cmluZ3MyID0gYXJyYXkoCiAgICdcXCcsIC8vIGRhcyBcIGRpZW50IHp1bSBNYXNraWVyZW4gdm9uIHJlc2VydmllcnRlbiBaZWljaGVuIAoJIiciLAogICAnKicsCgknfCcsCiAgICcrJwopOwoKJGV4Y2x1ZGVfc3RyaW5nc19tZXJnZSA9IGFycmF5X21lcmdlKCRleGNsdWRlX3N0cmluZ3MsICRleGNsdWRlX3N0cmluZ3MyKTsKCgppZiAoaXNzZXQoJHN1Y2h0aXAwKSl7Cgkkc2VhcmNodGlwMCA9ICJcbjxoJGh4X3N1Y2h0aXAgaWQ9J3N1Y2h0aXBoZWFkZXInPiRzdWNodGlwMCA8L2gkaHhfc3VjaHRpcD5cbiI7Cgl9IGVsc2UgewoJJHNlYXJjaHRpcDAgPSAiXG48aCRoeF9zdWNodGlwIGlkPSdzdWNodGlwaGVhZGVyJz5TdWNodGlwcHM6IDwvaCRoeF9zdWNodGlwPlxuIjsKfQoKaWYgKGlzc2V0KCRzdWNodGlwMSkpewoJJHNlYXJjaHRpcDEgPSAiPGxpPiRzdWNodGlwMTwvbGk+XG4iOwoJfSBlbHNlIHsKCSRzZWFyY2h0aXAxID0gIjxsaT5EaWUgU3VjaGUgZmluZGV0IGFsbGUgU2VpdGVuLCBkaWUgSWhyZW4gU3VjaGJlZ3JpZmYgZW50aGFsdGVuIC0gYXVjaCBhbHMgV29ydGJlc3RhbmR0ZWlsLiBFaW5lIFN1Y2hlIG5hY2ggJnJhcXVvO3Rlc3QmbGFxdW87IGZpbmRldCBhbHNvIGF1Y2ggJnJhcXVvO3NwJmF1bWw7PGVtPnRlc3Q8L2VtPmUmbGFxdW87LjwvbGk+IjsKCQp9CgppZiAoaXNzZXQoJHN1Y2h0aXAyKSl7Cgkkc2VhcmNodGlwMiA9ICI8bGk+JHN1Y2h0aXAyPC9saT5cbiI7Cgl9IGVsc2UgewoJJHNlYXJjaHRpcDIgPSAiPGxpPldlbm4gU2llIElocmUgU3VjaGUgYXVmIGdhbnplIFcmb3VtbDtydGVyIGVpbnNjaHImYXVtbDtua2VuIHdvbGxlbiwgZiZ1dW1sO2dlbiBTaWUgdm9yIHVuZCBoaW50ZXIgZGVtIFdvcnQgZWluIExlZXJ6ZWljaGVuIGVpbiwgdW5kIHVtc2NobGllJnN6bGlnO2VuIGFsbGVzIG1pdCBBbmYmdXVtbDtocnVuZ3N6ZWljaGVuLiBCZWlzcGllbDogXCIgdGVzdCBcIi4gJnJhcXVvO3NwJmF1bWw7PGVtPnRlc3Q8L2VtPmUmbGFxdW87IHdpcmQgZGFubiBuaWNodCBtZWhyIGdlZnVuZGVuLiA8L2xpPiI7Cn0KCiRzZWFyY2h0aXAyID0gIiI7CgppZiAoaXNzZXQoJHN1Y2h0aXAzKSl7Cgkkc2VhcmNodGlwMyA9ICI8bGk+JHN1Y2h0aXAzPC9saT5cbiI7Cgl9IGVsc2UgewoJCSRzZWFyY2h0aXAzID0gIjxsaT5XZW5uIFNpZSBtZWhyZXJlIFcmb3VtbDtydGVyIGVpbmdlYmVuLCB3ZXJkZW4gYWxsZSBEb2t1bWVudGUgZ2VmdW5kZW4sIGRpZSA8ZW0+YWxsZTwvZW0+IGVpbmdlZ2ViZW5lbiBXJm91bWw7cnRlciBlbnRoYWx0ZW4sIGVnYWwgaW4gd2VsY2hlciBSZWloZW5mb2xnZSAoQU5ELVZlcmtuJnV1bWw7cGZ1bmcpLgoJCTxiciAvPjxlbT5KZSBtZWhyIFcmb3VtbDtydGVyLCBkZXN0byB3ZW5pZ2VyIFRyZWZmZXIuPC9lbT48L2xpPiI7Cn0KCQkKaWYgKGlzc2V0KCRzdWNodGlwMzEpKXsKCSRzZWFyY2h0aXAzMSA9ICI8bGk+JHN1Y2h0aXAzMTwvbGk+XG4iOwoJfSBlbHNlIHsKCSRzZWFyY2h0aXAzMSA9CSI8bGk+V2VubiBTaWUgbWVocmVyZSBXJm91bWw7cnRlciBcIm1pdCBBbmYmdXVtbDtocnVuZ3N6ZWljaGVuIHVtc2NobGllJnN6bGlnO2VuXCIsIHdlcmRlbiBhbGxlIERva3VtZW50ZSBnZWZ1bmRlbiwgZGllIGFsbGUgZWluZ2VnZWJlbmVuIFcmb3VtbDtydGVyIGV4YWt0IGluIGRlciBlaW5nZWdlYmVuZW4gV2Vpc2UgZW50aGFsdGVuLjwvbGk+IjsKfQoKaWYgKGlzc2V0KCRzdWNodGlwM29yKSl7Cgkkc2VhcmNodGlwM29yID0gIjxsaT4kc3VjaHRpcDNvcjwvbGk+XG4iOwp9CgoKaWYgKCFpc3NldCgkd2VpdGVydHh0KSl7Cgkkd2VpdGVydHh0ID0gIndlaXRlcmUgVHJlZmZlciB6ZWlnZW4iOwp9CmlmICghaXNzZXQoJHp1cnVlY2t0eHQpKXsKCSR6dXJ1ZWNrdHh0ID0gInZvcmhlcmlnZSBUcmVmZmVyIjsKfQoKCmlmICghaXNzZXQoJHNlYXJjaCkpIHskc2VhcmNoID0gJHZhbHVlO30KCmlmICghaXNzZXQoJHNob3dfZXh0KSkgeyRzaG93X2V4dCA9IHRydWU7fQoKaWYgKCFpc3NldCgkcHJvdCkpIHskcHJvdCA9ICJodHRwOi8vIjt9CgoKCgoKCiRzZWFyY2h0aXA0ID0gIiI7CmlmICgkanVtcCA9PSB0cnVlICYmICR0YXJnZXQgPT0gIiIpIHsKCglpZiAoaXNzZXQoJHN1Y2h0aXA0KSl7CgkJJHNlYXJjaHRpcDQgPSAiPGxpPiRzdWNodGlwNDwvbGk+XG4iOwoJCX0gZWxzZSB7CgkJJHNlYXJjaHRpcDQgPSAiPGxpPkZhbGxzIGRpZSBTdWNoZSBudXIgZWluZW4gZWluemlnZW4gVHJlZmZlciBlcmdpYnQsIHdpcmQgZGllIFRyZWZmZXJzZWl0ZSBkaXJla3QgYW5nZXNwcnVuZ2VuLjwvbGk+XG4iOwoJfQp9CgovLyAkdWxzdGFydCA9ICIkc2VhcmNodGlwMDxkaXYgaWQ9J3N1Y2h0aXBwcycgIGNsYXNzPSdrbGFwcGVuJyA+XG48dWw+XG4iOwovLyAkdWxlbmQgPSAiPC91bD5cbjwvZGl2PlxuIjsKLy8KLy8gaWYgKCR0aXBwcykgeyRzZWFyY2h0aXAgPSAkdWxzdGFydC4kc2VhcmNodGlwMS4kc2VhcmNodGlwMi4kc2VhcmNodGlwMy4kc2VhcmNodGlwMzEuJHNlYXJjaHRpcDNvci4kc2VhcmNodGlwNC4kdWxlbmQ7IH1lbHNlIHskc2VhcmNodGlwID0iIjt9CgovLyBiZyBmdWVyIENyZWRpdC1MaW5rOgppZiAoIWlzc2V0KCRiZykpICRiZyA9ICIjRkZGRkZGIjsKaWYgKHN0cnBvcygkYmcsJyMnKSA9PT0gZmFsc2UpICRiZyA9ICcjJy4kYmc7CgppZiAocHJlZ19tYXRjaCgnL14jWzAtOUEtRl17MSw2fSQvaScsICRiZykgJiYgc3RybGVuKCRiZykgPT0gNykgewoKICAgICAgJHJlZEggPSBiYXNlX2NvbnZlcnQoc3Vic3RyKCRiZywgMSwgMiksIDE2LCAxMCk7CiAgICAgICRncmVlbkggPSBiYXNlX2NvbnZlcnQoc3Vic3RyKCRiZywgMywgMiksICAxNiwgMTApOwogICAgICAkYmx1ZUggPSBiYXNlX2NvbnZlcnQoc3Vic3RyKCRiZywgNSwgMiksICAxNiwgMTApOwoKICAgICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvQUVSVCNjb2xvci1jb250cmFzdAogICAgICAkc3VtID0gJHJlZEgqMjk5ICsgJGdyZWVuSCo1ODcgKyAkYmx1ZUgqMTE0OwogICAgICBpZiAoJHN1bSA8IDEyNzAwMCApIHsKICAgICAgICAgICAkY29tcCA9ICIjRkZGRkZGIjsKICAgICAgfSBlbHNlIHsKICAgICAgICAgICAkY29tcCA9IiMwMDAwMDAiOwogICAgICB9Cn0gZWxzZSB7CiAgICAgICRmZWhsZXIgPSAxOwogICAgICAkYmcgPSAiI0ZGRkZGRiI7CiAgICAgICRjb21wID0gIiMwMDAwMDAiOwp9Cgokd2R3ID0gJzxwIHN0eWxlPSJkaXNwbGF5OmJsb2NrICFpbXBvcnRhbnQ7IGZvbnQtc2l6ZTogMTBweCAhaW1wb3J0YW50OyBjb2xvcjonLiRjb21wLicgIWltcG9ydGFudDsgYmFja2dyb3VuZDonLiRiZy4nICFpbXBvcnRhbnQiPiZuYnNwO3NjcmlwdCZuYnNwOyZjb3B5OyZuYnNwOzIwMTYmbmJzcDtieSZuYnNwOzxhIHN0eWxlPSJjb2xvcjonLiRjb21wLicgIWltcG9ydGFudDsgZGlzcGxheTppbmxpbmUgIWltcG9ydGFudDsgZm9udC1zaXplOiAxMHB4ICFpbXBvcnRhbnQ7IGZvbnQtd2VpZ2h0Om5vcm1hbCAhaW1wb3J0YW50OyB0ZXh0LWRlY29yYXRpb246bm9uZSAhaW1wb3J0YW50IiBocmVmPSJodHRwczovL3dlYmRlc2lnbi53ZWlzc2hhcnQuZGUiPndlYmRlc2lnbiZuYnNwO3dlaXNzaGFydDwvYT48L3A+JzsKCgoKaWYgKGlzc2V0KCRwd2QpKSB7Cgkkc2VydmVyID0gc3RyX3JlcGxhY2UgKCJ3d3cuIiwiIiwgJF9TRVJWRVJbJ1NFUlZFUl9OQU1FJ10gKTsKCSRzZXJ2ZXIgPSBzdHJfcmVwbGFjZSAoIisiLCIiLCAkc2VydmVyKTsKCSRzZXJ2ZXIgPSBzdHJfcmVwbGFjZSAoIi0iLCIiLCAkc2VydmVyKTsKCSRkb20gPSBjcmMzMigkc2VydmVyKTsKICAgICAgJGNoYXZlID0gJHB3ZCAvIHNwcmludGYoIiV1IiwgJGRvbSk7Cn0KaWYgKGlzc2V0KCRjaGF2ZSkgJiYgJGNoYXZlID09ICIzMjEiKXsKCSR3ZHcgPScnOwp9CgoKLy8gbmV1ZXMgRmVuc3RlcgplY2hvJwo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ci8qIDwhW0NEQVRBWyAqLwoKZnVuY3Rpb24gbGlua29wZW5lcihhKSB7CiAgIHZhciBiPWE/Il9ibGFuayI6Il9zZWxmIjsKICAgdmFyIGM9ZG9jdW1lbnQubGlua3M7CiAgIGZvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKSB7CiAgIAkvLyBudXIgU3VjaHRyZWZmZXI6CiAgIAlpZiAoY1tpXS50b1N0cmluZygpLmluZGV4T2YoIm5leHQiKSA9PSAtMSAmJiBjW2ldLnRvU3RyaW5nKCkuaW5kZXhPZigiP3E9IikgPiAtMSApIHsKICAgICAgCQljW2ldLnRhcmdldD1iOwogICAJfQogICB9Cn0KCmZ1bmN0aW9uIGxpbmtjb29raWUoKSB7CiAgIGlmKGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKCJzdWNob2VmZm5lbiIpICE9PSAtMSl7CiAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICJzdWNoPTA7cGF0aD0vO2V4cGlyZXM9VGh1LCAwMS1KYW4tNzAgMDA6MDA6MDEgR01UIjsKICAgfSBlbHNlIHsKICAgICBkb2N1bWVudC5jb29raWU9InN1Y2g9c3VjaG9lZmZuZW47IHBhdGggPS8iOwogICB9Cn0KCmZ1bmN0aW9uIGFkZEV2ZW50KG9iaiwgZXZUeXBlLCBmbil7CiBpZiAob2JqLmFkZEV2ZW50TGlzdGVuZXIpewogICBvYmouYWRkRXZlbnRMaXN0ZW5lcihldlR5cGUsIGZuLCBmYWxzZSk7CiAgIHJldHVybiB0cnVlOwogfSBlbHNlIGlmIChvYmouYXR0YWNoRXZlbnQpewogICB2YXIgciA9IG9iai5hdHRhY2hFdmVudCgib24iK2V2VHlwZSwgZm4pOwogICByZXR1cm4gcjsKIH0gZWxzZSB7CiAgIHJldHVybiBmYWxzZTsKIH0KfQoKLyogXV0+ICovCjwvc2NyaXB0PgonOwoKCmlmKGlzc2V0KCRfR0VUWyJxIl0pIHx8IGlzc2V0KCRfUE9TVFsicSJdKSkgewoJaWYgKGlzc2V0KCRfR0VUWyJxIl0pICYmICRfR0VUWyJxIl0gIT0gIiIpICRzZWFyY2ggPSBzdHJpcHNsYXNoZXMoJF9HRVRbInEiXSk7CglpZiAoaXNzZXQoJF9QT1NUWyJxIl0pICYmICRfUE9TVFsicSJdICE9ICIiKSAkc2VhcmNoID0gc3RyaXBzbGFzaGVzKCRfUE9TVFsicSJdKTsKCgkkZ2FuemVyYXVzZHJ1Y2sgPSAkc2VhcmNoOwoJaWYgKHN0cmlzdHIoJHNlYXJjaCwgIkNvbnRlbnQtVHlwZSIpKSRzZWFyY2ggPSAibm8gc3BhbSBoZXJlISI7CgoKCWlmIChzdHJwb3Moc3RydG9sb3dlcigkZW5jb2RpbmcpLCJ1dGYiKSE9PSBmYWxzZSkgewovLwkJZWNobyAidXRmLTg6IjsKCQkkc2VhcmNoID0gaHRtbHNwZWNpYWxjaGFycygkc2VhcmNoLCBFTlRfTk9RVU9URVMsICJVVEYtOCIpOwoJfSBlbHNlIHsKLy8JCWVjaG8gIklTTzoiOwoJCSRzZWFyY2ggPSBodG1sc3BlY2lhbGNoYXJzKCRzZWFyY2gsIEVOVF9OT1FVT1RFUywgIklTTy04ODU5LTE1Iik7Cgl9CgoJZm9yZWFjaCgkZXhjbHVkZV9zdHJpbmdzX21lcmdlIGFzICRrKSB7CgkJJGdlc3VjaHQgPSBzdHJfcmVwbGFjZSgkaywiIiwkc2VhcmNoKTsKCgkJLyogd2VubiBleGNsdWRlZCBzdHJpbmdzIGltIFN1Y2hiZWdyaWZmLCB1bmQgZGFkdXJjaCBTdWNoYmVncmlmZiBrbGVpbmVyIGFscyAkbGVuZ3RoIHdpcmQ6ICovCgkJaWYgKHN0cmxlbih0cmltKCRzZWFyY2gpKSA+IHN0cmxlbih0cmltKCRnZXN1Y2h0KSkgJiYgc3RybGVuKHRyaW0oJHNlYXJjaCkpID49ICRsZW5ndGggKSB7CgkJCSRtaW5sZW5ndGggPSAkbm9yZXN1bHQ7IAoJCX0KCX0KCQkKCS8vIGdhbnplIEF1c2RydWVja2Ugc3VjaGVuOgoJJGF1c2RydWNrID0gZmFsc2U7CglpZiAoc3RycG9zKCRnYW56ZXJhdXNkcnVjaywnIicpICE9PSBmYWxzZSB8fCBzdHJwb3MoJGdhbnplcmF1c2RydWNrLCInIikgIT09IGZhbHNlICkgeyAKCQkkYXVzZHJ1Y2sgPSB0cnVlOwoJfSAKCQoKCSRzZWFyY2ggPSBwcmVnX3JlcGxhY2UoJy9bIF17Mix9L3NtJywgJyAnLCAkc2VhcmNoKTsKCgoJaWYgKGZpbGVfZXhpc3RzKCJzZWFyY2hfcmVwbGFjZS5waHAiKSkge2luY2x1ZGUgKCJzZWFyY2hfcmVwbGFjZS5waHAiKTt9CgoJLy8gdW5lcnd1ZW5zY2h0ZSBTdHJpbmdzIHZvbiBkZXIgU3VjaGUgYXVzc2NobGllc3NlbgoJZm9yZWFjaCgkZXhjbHVkZV9zdHJpbmdzX21lcmdlIGFzICRrKSB7CgkJJHNlYXJjaCA9IHN0cl9yZXBsYWNlKCRrLCIiLCRzZWFyY2gpOwoJfQoKCgkkc2VhcmNoID0gdHJpbSgkc2VhcmNoKTsKCSRzZWFyY2ggPSBzdHJfcmVwbGFjZSAoICcmYW1wOycsICcmJywgJHNlYXJjaCApOyAvLyBsYWVzc3QgaHRtbCBlbnRpdGllcyB3aWUgJiMzNTE7IHp1ICh6LkIuIHR1ZXJraXNjaGUgU29uZGVyemVpY2hlbikKCS8vZGllIGdsZWljaGUgWmVpbGUgYXVjaCBpbiBkaWUgc3VjaGVuLnBocCwgYXVzc2VyZGVtIFplaWxlIDQ4IGhpZXIgd2Vna29tbWVudGllcmVuLgoKCglpZihlbXB0eSgkc2VhcmNoKSkgeyRzZWFyY2g9IiI7fQoJJHNlYXJjaGxlbmd0aCA9IHN0cl9yZXBsYWNlKCcmcXVvdDsnLCcnLCRzZWFyY2gpOwoJaWYoc3RybGVuKCRzZWFyY2hsZW5ndGgpID49ICRsZW5ndGggJiYgJHNlYXJjaCAhPSAkdmFsdWUpIHsKCglpZiAoIWlzc2V0KCRzdWNoaGlud2VpcykgfHwgICRzdWNoaGlud2VpcyA9PSAiIikgewoJCSRzZWFyY2hoaW53ZWlzID0gIlNpZSBzdWNoZW4gbmFjaCI7Cgl9IGVsc2UgewoJCSRzZWFyY2hoaW53ZWlzID0gJHN1Y2hoaW53ZWlzOwoJCWVjaG8gJzxwPicuJHNlYXJjaGhpbndlaXMuJyA8ZW0+JnJhcXVvOycuJGdlc3VjaHQuJyZsYXF1bzs8L2VtPic7Cgl9CgoJLy8gZGllIEZ1bmt0aW9uIHp1bSBleHRyYWhpZXJlbiB2b24gVGVpbHN0cmluZ3MKCWZ1bmN0aW9uIGF1c2xlc2VuKCRhbGwsICRzdGFydCwgJGVuZCkgewoJCWlmIChzdHJpc3RyKCRhbGwsJHN0YXJ0KSkgewoJCQkkc3RhcnRfcG9zPXN0cnBvcyhzdHJ0b2xvd2VyKCRhbGwpLHN0cnRvbG93ZXIoJHN0YXJ0KSkgKyBzdHJsZW4oJHN0YXJ0KTsKCQkJJHJlc3QgPSBzdWJzdHIoJGFsbCwkc3RhcnRfcG9zKTsKCQkJJGVuZF9wb3M9c3RycG9zKHN0cnRvbG93ZXIoJHJlc3QpLHN0cnRvbG93ZXIoJGVuZCkpOwoJCQkkZXJnID0gc3Vic3RyKCRyZXN0LDAsJGVuZF9wb3MpOwoJCQlyZXR1cm4gJGVyZzsKCQl9Cgl9CgoKCS8vIGRpZSBGdW5rdGlvbiB6dW0gRHVyY2hzdWNoZW4gZGVzIFZlcnplaWNobmlzYmF1bXM6CglpZiAoIWlzc2V0KCRleGNsdWRlX2RpcnMpKSAkZXhjbHVkZV9kaXJzID0gYXJyYXkoIiIpOwoKCWZ1bmN0aW9uIHRyZWUoJG9yZG5lciwgJHN1YiA9IEZBTFNFKSB7CgkJZ2xvYmFsICRlcmdlYjsKCQkkaGFuZGxlID0gb3BlbmRpcigkb3JkbmVyKTsKCQl3aGlsZSAoZmFsc2UgIT09ICgkZmlsZSA9IHJlYWRkaXIgKCRoYW5kbGUpKSkgewoJCQlpZigkZmlsZSAhPSAiLiIgJiYgJGZpbGUgIT0gIi4uIiAmJiBpc19kaXIoJG9yZG5lci4iLyIuJGZpbGUpKSB7CgkJCQkkY29tcGwgPSAkb3JkbmVyLiIvIi4kZmlsZS4iLyI7CgkgICAgICAgCQkkZXJnZWIgPSAkZXJnZWIuIiwiLiRjb21wbDsKICAgICAgICAJCXRyZWUoJG9yZG5lci4iLyIuJGZpbGUsIFRSVUUpOwoJCQl9CgkJfQoJICAJY2xvc2VkaXIoJGhhbmRsZSk7Cgl9CgoJaWYgKCRhbGxlZGlycykgewoJICAgdHJlZSgiLiIpOwoJICAgJGVyZ2ViID0gIi4vIi4kZXJnZWI7CgkgICAkZGlycyA9IGV4cGxvZGUgKCIsIiwgJGVyZ2ViKTsKCX0KCglmb3JlYWNoKCRkaXJzIGFzICRkaXIpIHsKCQlpZighaW5fYXJyYXkoJGRpciwkZXhjbHVkZV9kaXJzKSkgewoJCSR2ZXJ6ID0gb3BlbmRpcigkZGlyKTsKCgkJd2hpbGUoJGZpbGUgPSByZWFkZGlyKCR2ZXJ6KSkgewoKCQlpZigkZmlsZSAhPSAiLiIgJiYgJGZpbGUgIT0gIi4uIiAmJiAkZmlsZSAhPSAiLmh0YWNjZXNzIikgewoKCQkkZHVyY2hzdWNodCA9ICRkdXJjaHN1Y2h0ICsgMTsKCQkvLyBlaW56ZWxuZSBEYXRlaWVuIHZvbiBkZXIgU3VjaGUgYXVzc2NobGllc3NlbgoJCS8vIGRpZSBmb2xnZW5kZW4gOCBaZWlsZW4gZXJsYXViZW4gQXVzY2hsdXNzIHZvbiBTdWJzdHJpbmdzIGluICRleGNsdWRlX2ZpbGVzCgkJJG5vbGlzdD1mYWxzZTsKCQlmb3IgKCRlPTA7JGU8Y291bnQoJGV4Y2x1ZGVfZmlsZXMpOyRlKyspIHsKCQkJJHBvcyA9IHN0cnBvcygkZmlsZSwkZXhjbHVkZV9maWxlc1skZV0pOwoJCQlpZiAoJHBvcyAhPT0gZmFsc2UpIHsKCQkJCSRub2xpc3QgPSB0cnVlOwoJCQl9CgkJfSAKCQkKCQlpZigkbm9saXN0ICE9PSB0cnVlICYmIHByZWdfbWF0Y2goIj0oXC4kZGF0X3R5cGUpJD0iLCRmaWxlKSkgewoKCQkJLy8gTWV0YS1BbmdhYmVuIGVybWl0dGVsbgoJCQkkdGl0ZWwgPSAiIjsKCQkJJGtleXdvcmRzID0gIiI7CgkJCSRkZXNjcmlwdGlvbiA9ICIiOwoJCQkkZ210YXJyYXk9Z2V0X21ldGFfdGFncygkZGlyLiRmaWxlKTsKCQkJCQoJCQl3aGlsZShsaXN0KCRrZXkxLCR2YWwpPWVhY2goJGdtdGFycmF5KSl7CgkJCQlzd2l0Y2goc3RydG9sb3dlcigka2V5MSkpewoJCQkJCWNhc2UgInRpdGxlIjogJHRpdGVsPSR2YWw7IGJyZWFrOwoJCQkJCWNhc2UgImtleXdvcmRzIjogJGtleXdvcmRzPSR2YWw7IGJyZWFrOwoJCQkJCWNhc2UgImRlc2NyaXB0aW9uIjogJGRlc2NyaXB0aW9uPSR2YWw7IGJyZWFrOwoJCQkJfQoJCQl9CgoJCQkkc3RyaW5nMSA9ICRzdHJpbmcgPSBmaWxlX2dldF9jb250ZW50cygkZGlyLiRmaWxlKTsKCQkJCQoJCQkkc3RyaW5nID0gc3RyX3JlcGxhY2UoIiZuYnNwOyIsIiAiLCRzdHJpbmcpOyAvLyB3ZWlsIHNvbnN0ICZsdDsmbmJzcDsgYWxzIGxpbWl0LWVuZCB3aXJrdD8/PwoJCQkKCQkJJHN0cmluZyA9IHByZWdfcmVwbGFjZSgnI1tcc117Mix9I3MnLCAnICcsICRzdHJpbmcpOyAvLyBtZWhyZXJlIExlZXJ6ZWljaGVuIGluIGVpbnMgdW13YW5kZWxuCgkJCQoJCQkvLyB3ZWlsIGFuc29uc3RlbiBlaW4gJmx0OyBpbSBRdWVsbHRleHQgZGVuIFN1Y2hiZXJlaWNoIGJlZW5kZXQ6CgkJCSRzdHJpbmcgPSBzdHJfcmVwbGFjZSgiJmx0OyIsIiIsJHN0cmluZyk7CgkJCQoJCQlpZiAoZmlsZV9leGlzdHMoInRhcmdldF9yZXBsYWNlLnBocCIpKSB7aW5jbHVkZSAoInRhcmdldF9yZXBsYWNlLnBocCIpO30KCQkJCgkKCQkJLy8gZGFtaXQgd2VyZGVuIGdhbnplIFdvZXJ0ZXIgZ2VmdW5kZW4sIGF1Y2ggd2VubiBzaWUgaW4gVGFncyBlaW5nZXNjaGxvc3NlbiBzaW5kOgoJCQkkc3RyaW5nID0gc3RyX3JlcGxhY2UoIjwiLCIgPCIsJHN0cmluZyk7CgkJCSRzdHJpbmcgPSBzdHJfcmVwbGFjZSgiPiIsIj4gIiwkc3RyaW5nKTsKCgkJCS8vIGh0bWwgdGFncyBtaXQgZWluZ2VzY2hsb3NzZW5lbiBwaHAgdGFncyByYXVzIC0gd2VpbCBzb25zdCBlaW4gZWluemVsbmVzIDwgb2RlciAmbHQ7IGFscyBlbmQgd2lya3QKICAJCQkkc3VjaG11c3RlciA9ICIvPFw/W14+XStcPz4vIjsgCiAgCQkJJHN0cmluZyA9IHByZWdfcmVwbGFjZSgkc3VjaG11c3RlciwiIiwkc3RyaW5nKTsKCgovL2VjaG8gJGVuY29kaW5nOwoJCQlpZiAoc3RycG9zKHN0cnRvbG93ZXIoJGVuY29kaW5nKSwidXRmIikhPT0gZmFsc2UpIHsKCQkJCSRzdHJpbmcgPSBodG1sX2VudGl0eV9kZWNvZGUoJHN0cmluZywgRU5UX05PUVVPVEVTLCAiVVRGLTgiKTsKCQkJfSBlbHNlIHsKCQkJCSRzdHJpbmcgPSBodG1sX2VudGl0eV9kZWNvZGUoJHN0cmluZywgRU5UX05PUVVPVEVTLCAiSVNPLTg4NTktMSIpOwoJCQl9CiAgICAgICAgICAgIAkvLyBudXIgZnVlciB3ZHcgZHluLiBkZXNjcmlwdGlvbnM6CiAgICAgICAgICAgIAlpZiAoJF9TRVJWRVJbJ1NFUlZFUl9OQU1FJ10gPT0gIndlYmRlc2lnbi53ZWlzc2hhcnQuZGUiKSB7CiAgIAkJCQlpZiAoJGRlc2NyaXB0aW9uID09ICIiKXsKICAgCQkJCQkkZGVzY3JpcHRpb24gPSBhdXNsZXNlbigkc3RyaW5nMSwgImRlc2NyaXB0aW9uIiwgJyI7Jyk7CgkJCQkJJGRlc2NyaXB0aW9uID0gc3RyaXBfdGFncygkZGVzY3JpcHRpb24pOwoJCQkJCSRkZXNjcmlwdGlvbiA9IHByZWdfcmVwbGFjZSgiL1xufFxyfGNvbnRlbnR8XCJ8PXxcL3xcPy8iLCAiIiwgJGRlc2NyaXB0aW9uKTsKICAgCQkJCX0KICAgICAgICAgICAgCX0KCgkJCS8vIHVuZCB3ZWlsIDx0aXRsZT4gbmljaHQgaW1tZXIgYWxzIE1ldGEtdGFnIGNvZGllcnQgd2lyZDoKCQkJaWYgKCR0aXRlbCA9PSAiIikgJHRpdGVsID0gYXVzbGVzZW4oJHN0cmluZywgIjx0aXRsZT4iLCAiPC90aXRsZT4iKTsKCgkJCS8vIHdlaWwgZXMgTGV1dGUgZ2lidCwgZGllIG1ldGEgVGFncyBtaXQgWmVpbGVudW1icnVjaCBzY2hyZWliZW46CgkJCSRkZXNjcmlwdGlvbiA9IHN0cl9yZXBsYWNlKCJcbiIsIiIsJGRlc2NyaXB0aW9uKTsKCQkJJGtleXdvcmRzID0gc3RyX3JlcGxhY2UoIlxuIiwiIiwka2V5d29yZHMpOwoJCQkkdGl0ZWwgPSBzdHJfcmVwbGFjZSgiXG4iLCIiLCR0aXRlbCk7CgoJCQkvLyBEYXRlaWVuIG51ciB6d2lzY2hlbiBkZW4gYmVpZGVuIGxpbWl0ZXIgdGFncyBhdXN3ZXJ0ZW46CgkJCWlmICgkbGltaXRfc3RhcnQgIT0gIiIpIHsKCQkJCS8vIFd1cmRlIG5lZWRsZSBuaWNodCBnZWZ1bmRlbiwgZ2lidCBzdHJwb3MoKSBkZW4gYm9vbGVhbi1XZXJ0IEZBTFNFIHp1csODwrxjay4KCQkJCWlmIChzdHJwb3Moc3RydG9sb3dlcigkc3RyaW5nKSxzdHJ0b2xvd2VyKCRsaW1pdF9zdGFydCkpICE9PSBmYWxzZSkgewoJCQkJCSRwb3M9c3RycG9zKHN0cnRvbG93ZXIoJHN0cmluZyksc3RydG9sb3dlcigkbGltaXRfc3RhcnQpKSArIHN0cmxlbigkbGltaXRfc3RhcnQpOwoJCQkJCSRzdWJzdHJpbmdfcmVzdCA9IHN1YnN0cigkc3RyaW5nLCRwb3MpOwoJCQkJfSBlbHNlIHsKCQkJCQlpZiAoaXNzZXQoJGxpbWl0X29ubHkpICYmICRsaW1pdF9vbmx5ID09PSB0cnVlKSB7JHN1YnN0cmluZ19yZXN0ID0gIiI7fSAvL2RhbWl0IGJyaWNodCBkaWUgU3VjaGUgYWIsIHdlbm4gJGxpbWl0X3N0YXJ0IG5pY2h0IGdlZnVuZGVuIHdpcmQuCgkJCQkJZWxzZSB7JHN1YnN0cmluZ19yZXN0ID0gJHN0cmluZzt9CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQkkc3Vic3RyaW5nX3Jlc3QgPSAkc3RyaW5nOwoJCQl9CgoJCQkvLyB3ZW5uICRsaW1pdF9lbmQgZ2VzZXR6dDoKCQkJaWYgKCRsaW1pdF9lbmQgIT0gIiIpIHsKCQkJCSRlbmRfcG9zPXN0cnBvcyhzdHJ0b2xvd2VyKCRzdWJzdHJpbmdfcmVzdCksc3RydG9sb3dlcigkbGltaXRfZW5kKSk7CgkJCQlpZiAoJGVuZF9wb3MgIT09IGZhbHNlKSB7CgkJCQkJJHN0cmluZyA9IHN1YnN0cigkc3Vic3RyaW5nX3Jlc3QsMCwkZW5kX3Bvcyk7CgkJCQl9IGVsc2UgewoJCQkJCSRzdHJpbmcgPSAkc3Vic3RyaW5nX3Jlc3Q7CgkJCQl9CiAgICAgICAgICAgICAJfSBlbHNlIHsKCQkJCSRzdHJpbmcgPSAkc3Vic3RyaW5nX3Jlc3Q7CiAgICAgICAgICAgICAJfQoKCgkJCS8vSW5oYWx0IHZvbiB0YWdzIGF1c3dlcnRlbjoKCQkJaWYgKCR0YWdzPT09ZmFsc2UpIAkkc3RyaW5nID0gc3RyaXBfdGFncygkc3RyaW5nKTsKCgkJCS8vIGRpZSBtZXRhIHRhZ3MgaW4gZGllIFN1Y2hlIGVpbnNjaGxpZXNzZW4gZ2VtYWVzcyBjb25maWc6CiAgICAgICAgICAgIAlpZiAoJHRhZ3MgPT09IHRydWUpIHska2V5PXRydWU7ICRkZXNjPXRydWU7ICR0aXQ9dHJ1ZTt9CgkJCWlmICgka2V5ID09PSB0cnVlKSAkc3RyaW5nPSRzdHJpbmcuJGtleXdvcmRzOwoJCQlpZiAoJGRlc2MgPT09IHRydWUpICRzdHJpbmc9JHN0cmluZy4kZGVzY3JpcHRpb247CgkJCWlmICgkdGl0ID09PSB0cnVlKSAkc3RyaW5nPSRzdHJpbmcuJHRpdGVsOwoKCQkJJHN0cmluZyA9IHN0cl9yZXBsYWNlKCJcbiIsICIgIiwgJHN0cmluZyk7CgoJCQkkc3RyaW5nID0gc3RyX3JlcGxhY2UoInRpdGxlPiIsICIiLCAkc3RyaW5nKTsgLy8gd2VubiBUcmVmZmVyIGluIDx0aXRsZT4gd2lyZCB0aXRsZT4gYW5nZXplaWd0PwoKCQkJCgkJCS8vIHVuZXJ3dWVuc2NodGUgU3RyaW5ncyB2b24gZGVyIFN1Y2hlIGF1c3NjaGxpZXNzZW4KCQkJZm9yZWFjaCgkZXhjbHVkZV9zdHJpbmdzX21lcmdlIGFzICRrKSB7CgkJCQkkc3RyaW5nID0gc3RyX3JlcGxhY2UoJGssIiIsJHN0cmluZyk7CgkJCX0JCQkKCgogICAgICAgICAgIAkJLy8gRS1NYWlscyByYXVzOiBodHRwOi8vd3d3LnJlZ3VsYXItZXhwcmVzc2lvbnMuaW5mby9lbWFpbC5odG1sCiAgICAgICAgICAgIAkkc3VjaG11c3RlciA9ICcvXGJbQS1aMC05Ll8lKy1dK0BbQS1aMC05Li1dK1wuW0EtWl17Miw0fVxiL2knOwogICAgICAgICAgICAJJHN0cmluZyA9IHByZWdfcmVwbGFjZSgkc3VjaG11c3RlciwnJywgJHN0cmluZyk7CgoJCQlpZihtYl9kZXRlY3RfZW5jb2RpbmcoJHN0cmluZywgJ1VURi04LCBJU08tODg1OS0xJykgPT09ICdVVEYtOCcgJiYgZnVuY3Rpb25fZXhpc3RzKCdtYl9zdHJ0b2xvd2VyJykpewkKCQkJCSRzdHJpbmdsb3cgPSBtYl9zdHJ0b2xvd2VyKCRzdHJpbmcsJ1VURi04Jyk7CgkJCQkkc2VhcmNobG93ID0gbWJfc3RydG9sb3dlcigkc2VhcmNoLCdVVEYtOCcpOwoJCQl9IAoJCQllbHNlIHsKCQkJCSRzdHJpbmdsb3cgPSBzdHJ0b2xvd2VyKCRzdHJpbmcpOwoJCQkJJHNlYXJjaGxvdyA9IHN0cnRvbG93ZXIoJHNlYXJjaCk7CQoJCQl9CgoJCQkvLyB3ZWlsIHN0cnRvbG93ZXIgdW50ZXIgUEhQIDUuNCBhbnNjaGVpbmVuZCBuaWNodCBtZWhyIHR1dAoJCQkkdW1sYXV0X2dyb3NzID0gYXJyYXkoJ8OEJywnw5YnLCfDnCcpOwoJCQkkdW1sYXV0X2tsZWluID0gYXJyYXkoJ8OkJywnw7YnLCfDvCcpOwoJCQkkc2VhcmNobG93ID0gc3RyX3JlcGxhY2UoJHVtbGF1dF9ncm9zcywgJHVtbGF1dF9rbGVpbiwgJHNlYXJjaGxvdyk7CgkJCSRzdHJpbmdsb3cgPSBzdHJfcmVwbGFjZSgkdW1sYXV0X2dyb3NzLCAkdW1sYXV0X2tsZWluLCAkc3RyaW5nbG93KTsKCgkJCSMgZGllIHVuZC1WZXJrbnVlcGZ1bmc6CgkJCSRvciA9IGZhbHNlOyAKCgkJCWlmICgoc3RycG9zKCRzZWFyY2hsb3csIiBvciAiKSAhPT0gZmFsc2UgfHwgc3RycG9zKCRzZWFyY2hsb3csIiBvZGVyICIpICE9PSBmYWxzZSkgJiYgIGlzc2V0KCRzdWNodGlwM29yKSAmJiAkYXVzZHJ1Y2sgIT09IHRydWUgKSB7IC8vIFVtc2NoYWx0ZW4gdm9uIHVuZCBhdWYgb3IgCgkJCQkkb3IgPSB0cnVlOwoJCQkJJHNlYXJjaGxvdyA9IHN0cl9yZXBsYWNlKCIgb3IgIiwgIiAiLCAkc2VhcmNobG93KTsKCQkJCSRzZWFyY2hsb3cgPSBzdHJfcmVwbGFjZSgiIG9kZXIgIiwgIiAiLCAkc2VhcmNobG93KTsKCQkJfQoJCQkJCgkJCSMgV29ydGdydXBwZW4KCQkJaWYgKCRhdXNkcnVjayAhPT0gZmFsc2UpIHsKCQkJCSRzZWFyY2hsb3cgPSBzdHJfcmVwbGFjZSgnJnF1b3Q7JywnJywkc2VhcmNobG93KTsKCQkJCSRzZWFyY2hsb3cgPSBzdHJfcmVwbGFjZSgnIicsJycsJHNlYXJjaGxvdyk7CgkJCQkkc2VhcmNoX2FyclswXSA9ICRzZWFyY2hsb3c7CgoJCQl9IGVsc2UgewoJCQkJJHNlYXJjaF9hcnIgPSBleHBsb2RlKCIgIiwkc2VhcmNobG93KTsKCQkJfQoJCQkkc2VhcmNoX2NvdW50ID0gY291bnQoJHNlYXJjaF9hcnIpOwoKCgkJCSRpPTA7CgkJCWZvcmVhY2ggKCRzZWFyY2hfYXJyIGFzICRzZWFyY2hfd29yZCkgewoJCQkJaWYgKEBzdHJwb3MoJHN0cmluZ2xvdywkc2VhcmNoX3dvcmQpICE9PSBmYWxzZSkgewkgCS8vIHdlbm4gU3VjaGJlZ3JpZmYgdm9ya29tbXQsIHNjaG5lbGxlciBhbHMgcHJlZ19tYXRjaAkJCQkKCQkJCQkkaSsrOwoKCQkJCQlpZiAoJG9yID09PSB0cnVlKSB7JGkgPSAkc2VhcmNoX2NvdW50ID0gMTt9IC8vIGRlciBIYWNrLCB1bSBiZWkgT1IgbmljaHQgenUgd2FydGVuLCBiaXMgYWxsZSBTdWNoYmVncmlmZmUgZ2VmdW5kZW4gd2VyZGVuCgoJCQkJCWlmICgkaT09JHNlYXJjaF9jb3VudCkgewkJLy8gc29iYWxkIGFsbGUgU3VjaGJlZ3JpZmZlIGdlZnVuZGVuIHd1cmRlbi4uLgoJCQkJCQkKCQkJCQkJJHN0cmluZ2xvdyA9IHN0cmlwX3RhZ3MoJHN0cmluZ2xvdyk7CgoJCQkJCQkkdGVzdCA9IEBzdWJzdHJfY291bnQoJHN0cmluZ2xvdywgJHNlYXJjaF93b3JkKTsKCgkJCQkJCWlmICgkc2VhcmNoX2NvdW50ID4gMSl7CgkJCQkJCQkkcG9zPXN0cnBvcygkc3RyaW5nbG93LCRzZWFyY2hfd29yZCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQkkcG9zPXN0cnBvcygkc3RyaW5nbG93LCRzZWFyY2hsb3cpOwoJCQkJCQl9CgoKCQkJCQkJaWYgKCR2b3IgPj0gJHBvcykgewoJCQkJCQkJJHBpZWNlMSA9IHN1YnN0cigkc3RyaW5nLDAsJG5hY2gpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJJHBpZWNlMSA9IHN1YnN0cigkc3RyaW5nLCRwb3MtJHZvciwkdm9yKyRuYWNoKTsKCgkJCQkJCQkkcGllY2UxID0gc3Ryc3RyICgkcGllY2UxLCIgIik7IC8vIHZlcm1laWRldCBCcnVjaHN0dWVja2Ugdm9uIFdvZXJ0ZXJuIGFtIEFuZmFuZyBkZXMgS29udGV4dAoJCQkJCQl9CgoKCgkJCQkJCSRwaWVjZTEgPSBzdWJzdHIoJHBpZWNlMSwgMCwgc3RybGVuKHN0cnJjaHIoJHBpZWNlMSwzMikpKigtMSkpLiIgLi4uIjsgLy8gdmVybWVpZGV0IEJydWNoc3R1ZWNrZSB2b24gV29lcnRlcm4gYW0gRW5kZSBkZXMgS29udGV4dAoJCQkJCQkkcmVzdCA9ICI8YnIgLz4kcGllY2UxIjsKCgoKCgkJCQkJCSRmaWxlZm9yc2l6ZSA9ICRmaWxlOwoJCQkJCQlpZiAoJHNob3dfZXh0ICE9PSB0cnVlKSB7CgkJCQkJCQkkaW5mbyA9IHBhdGhpbmZvKCRmaWxlKTsKCQkJCQkJCSRmaWxlID0gIGJhc2VuYW1lKCRmaWxlLCcuJy4kaW5mb1snZXh0ZW5zaW9uJ10pOwoJCQkJCQl9CgoKCQkJCQkJaWYoJHZvcj09IjAiICYmICRuYWNoPT0iMCIpICRyZXN0ID0gIiI7CgoJICAgICAgICAgICAgICAgICAgICBpZighJGRlc2NyaXB0aW9uID09ICIiICYmICRzaG93X2Rlc2MgPT0gdHJ1ZSkgJHJlc3QgPSAiPGJyIC8+PHN0cm9uZz4kYmVzY2hyZWliPC9zdHJvbmc+ICRkZXNjcmlwdGlvbiI7CgkJCQkJCWlmKCRmaWxlbmFtZSkgJHRpdGVsID0gJGZpbGU7CgoJCQkJCQlpZiAoaXNzZXQoJGNoYXZlKSAmJiAkY2hhdmUgPT0gIjMyMSIpewoJCQkJCQkJLy8gdW5kb2N1bWVudGVkOiBudXIgZGlyIHplaWdlbgoJCQkJCQkJaWYgKGlzc2V0KCRzaG93X2Rpcl9vbmx5KSAmJiAkc2hvd19kaXJfb25seSA9PT0gdHJ1ZSkgewoJCQkJCQkJCSRsYXN0X2RpciA9IGV4cGxvZGUoJy8nLCAkZGlyKTsKCQkJCQkJCQkkeCA9IGFycmF5X2tleXMoJGxhc3RfZGlyKTsKCQkJCQkJCQkkbGFzdF9rZXkgPSBlbmQoJHgpIC0xOwoJCQkJCQkJCSR0aXRlbCA9ICRsYXN0X2RpclskbGFzdF9rZXldOwoJCQkJCQkJCSRmaWxlPSIiOwoJCQkJCQkJfQoJCQkJCQl9CgoJCQkJCQlpZigkdGl0ZWwgPT0gIiIpICR0aXRlbCA9ICRmaWxlOwoKCgkJCQkJCWlmIChpc3NldCgkcXVlcnkpKXsKCQkJCQkJCSRxZGlyID0gc3RyX3JlcGxhY2UoIi4vIiwiIiwkZGlyKTsgLy8gZW50ZmVybnQgZGFzIGZ1ZWhyZW5kZSAuLyBiZWltIHF1ZXJ5IHN0cmluZwogICAgICAgICAgICAgICAgICAgICAgICAgCWlmIChpc3NldCgkcXVlcnlfZW5kdW5nKSAmJiAkcXVlcnlfZW5kdW5nID09ICJubyIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAJCSRmZXh0ICA9IGFycmF5X3BvcChleHBsb2RlKCcuJywgJGZpbGUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZm5hbWUgPSBiYXNlbmFtZSgkZmlsZSwgJy4nLiRmZXh0KTsKCQkJCQkJCSAgICAkbGluayA9ICRxdWVyeS4kcWRpci4kZm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIAl9IGVsc2UgewoJCQkJCQkJCSRsaW5rID0gJHF1ZXJ5LiRxZGlyLiRmaWxlOwogICAgICAgICAgICAgICAgICAgICAgIAkJfQoJCQkJCQl9IGVsc2UgewoJCQkJCQkJJGxpbmsgPSAkZGlyLiRmaWxlOwoJCQkJCQl9CgoJCQkJCQlpZiAoaXNzZXQoJHF1ZXJ5KSl7CgkJCQkJCQlpZiAoJGF1c2RydWNrID09PSB0cnVlKSB7CgkJCQkJCQkJJGxpbmsgPSAkbGluay4nJnE9JTIyJy4kc2VhcmNobG93LiclMjInOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkkbGluayA9ICRsaW5rLiImcT0iLiRzZWFyY2hsb3c7CgkJCQkJCQl9CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlpZiAoJGF1c2RydWNrID09PSB0cnVlKSB7CgkJCQkJCQkJJGxpbmsgPSAkbGluay4nP3E9JTIyJy4kc2VhcmNobG93LiclMjInOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkkbGluayA9ICRsaW5rLiI/cT0iLiRzZWFyY2hsb3c7CgkJCQkJCQl9CgkJCQkJCX0KCgoJCQkJCQkJCgoJCQkJCQlpZiAoJF9TRVJWRVJbJ1NFUlZFUl9OQU1FJ10gPT0gIndlYmRlc2lnbi53ZWlzc2hhcnQuZGUiKSB7CgkJCSAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAJCQkvLyBVbWxlaXRlbiB2b24gS29tbWVudGFyZW4gYXVmIGRlbiBBcnRpa2VsOgogICAgICAgICAgICAgICAgICAJCQlpZiAoc3RycG9zKCRsaW5rLCdjb21tZW50JykgIT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgIAkJCSR0aXRlbCA9IHN0cl9yZXBsYWNlKCJjb21tZW50XyIsIiIsJHRpdGVsKTsKICAgICAgICAgICAgICAgICAgICAgCQkJJHRpdGVsID0gc3RyX3JlcGxhY2UoIi54bWwiLCIucGhwIiwkdGl0ZWwpOwogICAgICAgICAgICAgICAgICAgICAJCQkkdGl0ZWwgPSAnS29tbWVudGFyIGF1ZiBkZXIgU2VpdGUgJy4kdGl0ZWw7CiAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAJCQkkbGluayA9IHN0cl9yZXBsYWNlKCJjb21tZW50XyIsIiIsJGxpbmspOwogICAgICAgICAgICAgICAgICAgICAJCQkkbGluayA9IHN0cl9yZXBsYWNlKCIueG1sIiwiLnBocCIsJGxpbmspOwogICAgICAgICAgICAgICAgICAJCQl9CgogICAgICAgICAgICAgICAgICAJCQkvLyBKZXR6dCBVbWxlaXRlbiB2b24gbWQtVGV4dGZpbGVzIGF1ZiBkZW4gQXJ0aWtlbDoKICAgICAgICAgICAgICAgICAgCQkJaWYgKHN0cnBvcygkbGluaywnL21hcmtkb3duLycpICE9PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICAgICAJCQkkbGluayA9IHN0cl9yZXBsYWNlKCJtYXJrZG93bi8iLCIiLCRsaW5rKTsKICAgICAgICAgICAgICAgICAgICAgCQkJJGxpbmsgPSBzdHJfcmVwbGFjZSgiX3RleHQudHh0IiwiLnBocCIsJGxpbmspOwogICAgICAgICAgICAgICAgICAgICAJCQkkbGluayA9IHN0cl9yZXBsYWNlKCJwYl8iLCIiLCRsaW5rKTsKCQkJICAgCQkJCQkkdGl0ZWwgPSBzdHJfcmVwbGFjZSgiLi8iLCIiLCRsaW5rKTsgCiAgICAgICAgICAgICAgICAgIAkJCX0KCQkJCQkJfQoJCQkJCQkKCQkJCQkJaWYgKGlzc2V0KCRjaGF2ZSkgJiYgJGNoYXZlID09ICIzMjEiKXsKCQkJCSAgCQkJLy8gVW1sZWl0ZW4gdm9uIEluY2x1ZGUtRGF0ZWllbjoKCQkJCSAgCQkJaWYgKGlzc2V0KCRyZWRpcl9zdWZmaXgpICYmIGlzc2V0KCRyZWRpcl9yZXBsYWNlKSkgewogICAgICAgICAgICAgICAgICAgICAJCQkkdGl0ZWwgPSBzdHJfcmVwbGFjZSgkcmVkaXJfc3VmZml4LCRyZWRpcl9yZXBsYWNlLCR0aXRlbCk7CiAgICAgICAgICAgICAgICAgICAgIAkJCSRsaW5rID0gc3RyX3JlcGxhY2UoJHJlZGlyX3N1ZmZpeCwkcmVkaXJfcmVwbGFjZSwkbGluayk7CgkJCQkgIAkJCX0JCQkJCgkJCQkJCX0KCQkJCQkJCgkJCQkJCWlmKCR0aXRlbCAhPSAiIikgewoJCQkJCQkJCgkJCQkJCQkkdGl0ZWwgPSB0cmltKCR0aXRlbCk7CgoJCQkJCQkJaWYgKCR0YXJnZXQgPT0gImJsYW5rIikgewoJCQkJCQkJCSR6aWVsID0gJyB0YXJnZXQ9Il9ibGFuayInOwoJCQkJCQkJCSRqdW1wID0gZmFsc2U7CgkJCQkJCQl9IGVsc2VpZiAoJHRhcmdldCA9PSAicGFyZW50IikgewoJCQkJCQkJCSR6aWVsID0gJyB0YXJnZXQ9Il9wYXJlbnQiJzsKCQkJCQkJCQkkanVtcCA9IGZhbHNlOwoJCQkJCQkJfSBlbHNlaWYgKCR0YXJnZXQgIT0gIiIpIHsKCQkJCQkJCQkkemllbCA9ICcgdGFyZ2V0PSInLiR0YXJnZXQuJyInOwoJCQkJCQkJCSRqdW1wID0gZmFsc2U7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCSR6aWVsID0gJyc7CgkJCQkJCQl9CgoJCQkJCQkJLy8gdW0gZGVuIFVSSS1QYXJhbWV0ZXIgcT0genUgdW50ZXJkcsO8Y2tlbiA9PiBkYW5uIGdlaHQgJHRhcmdldHdhaGwgbmF0w7xybGljaCBuaWNodCBtZWhyLCB3ZWlsIGxpbmtvcGVuZXIgaW4gc2VhcmNoLnBocCAiP3E9IiBhYmZyYWd0CgkJCQkJCQlpZiAoaXNzZXQoJHF1ZXJ5c3RyaW5nKSAmJiAkcXVlcnlzdHJpbmcgPT09IHRydWUpIHskbGluayA9IHN0cl9yZXBsYWNlKCc/cT0nLiRzZWFyY2hsb3csJycsJGxpbmspO30KCQkJCQkJCWlmICgkcGZhZCA9PSB0cnVlKSB7CgkJCQkJCQkJCgkJCQkJCQkJaWYgKGlzc2V0KCRxdWVyeSkpewoJCSAgICAgICAgICAgICAgICAgICAgICAgIAkkdXJsID0gIiA8YSBocmVmPVwiIi4kbGluay4iXCIiLiR6aWVsLiI+Ii4kcHJvdC4kcGZhZGluZm8uJGxpbmsuIjwvYT4gIjsKCQkJCQkJCQl9IGVsc2UgewoKCQkJCQkJCS8vJGxpbmtfYW56ID0gc3RyX3JlcGxhY2UoJyN3ZHdfc3VjaGUnLCcnLCRsaW5rKTsKCQkJCQkJCSRsaW5rX2FueiA9IHN0cl9yZXBsYWNlKCclMjInLCcnLCRsaW5rKTsKCQkJCQkJCSRsaW5rX2FueiA9IHN0cl9yZXBsYWNlKCc/cT0nLiRzZWFyY2hsb3csJycsJGxpbmtfYW56KTsKCQkJCQkJCSRsaW5rX2FueiA9IHN0cl9yZXBsYWNlKCcuLi8nLCcvJywkbGlua19hbnopOwoJCQkJCQkJJGxpbmtfYW56ID0gc3RyX3JlcGxhY2UoJy4vJywnLycsJGxpbmtfYW56KTsKCQkJCQkJCWlmIChzdHJwb3MgKCRsaW5rLCcuLicpICE9PSBmYWxzZSkgeyRwZmFkaW5mbyA9IHN0cl9yZXBsYWNlKCRwMiwnJywkcGZhZGluZm8pO30KCQkJCQkJCQkJCgkJCQkJCQkvLyAkdXJsID0gIiA8YSBocmVmPVwiIi4kbGluay4iXCIiLiR6aWVsLiI+Ii4kcHJvdC4kcGZhZGluZm8uc3Vic3RyKCRsaW5rLDEpLiI8L2E+ICI7CgkJICAgICAgICAgICAgICAgICAgICAgICAgCSR1cmwgPSAiIDxhIGhyZWY9XCIiLiRsaW5rLiJcIiIuJHppZWwuIj4iLiRwcm90LiRwZmFkaW5mby4kbGlua19hbnouIjwvYT4gIjsKCQkJCQkJCQl9CgkgICAgICAgICAgICAgICAgICAgCQl9IGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgCQkkdXJsID0gIiI7CgkgICAgICAgICAgICAgICAgICAgICAgIAl9CgoJICAgICAgICAgICAgICAgICAgIAkJaWYgKCRhZW5kX2RhdCA9PSB0cnVlKSB7CgkJCQkJCQkJaWYgKCRkYXRlZm9ybSA9PSAiZW4iKSB7CgkJCQkJCQkJCUAkbW9kID0gJGZpbGVkYXRlLmRhdGUoIm0vZC95IiwgZmlsZW10aW1lKCRkaXIuJGZpbGVmb3JzaXplKSk7CgkJCQkJCQkJCgkJCQkJCQkJfSBlbHNlaWYgKCRkYXRlZm9ybSA9PSAiZGUiIHx8ICRkYXRlZm9ybSA9PSAiIiB8fCAhaXNzZXQoJGRhdGVmb3JtKSkgewoJCQkJCQkJCQlAJG1vZCA9ICRmaWxlZGF0ZS5kYXRlKCJkLm0ueSIsIGZpbGVtdGltZSgkZGlyLiRmaWxlZm9yc2l6ZSkpOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCUAkbW9kID0gJGZpbGVkYXRlLmRhdGUoJGRhdGVmb3JtLCBmaWxlbXRpbWUoJGRpci4kZmlsZWZvcnNpemUpKTsKCQkJCQkJCQl9CgkJCQkJCQkJJG1vZCA9ICI8c3BhbiBjbGFzcz0nbW9kMSc+Ii4kbW9kLiI8L3NwYW4+IjsKCQkJCQkJCX0gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIAkJJG1vZCA9ICIiOwoJICAgICAgICAgICAgICAgICAgICAJfQoKCQkJCQkJCS8vIGVpbiBUaHVtYiBlaW5iaW5kZW4sIHdlbm4gZWluZSBHcmFmaWstRGF0ZWkgbWl0IGdsZWljaGVtIERhdGVpbmFtZW4gaW0gT3JkbmVyIGxpZWd0CgkJCQkJCQkKCQkJCQkJCSR0aHVtYiA9ICcnOwoJCQkJCQkJaWYgKGlzc2V0KCRjaGF2ZSkgJiYgJGNoYXZlID09ICIzMjEiKSB7CgkKCQkJCQkJCQkkZXh0ZW5zaW9ucyA9IGFycmF5KCIuaHRtIiwiLmh0bWwiLCIuc2h0bWwiLCIucGhwIiwiLnBocDMiLCIucGhwNCIsIi5waHA1IiwgIi5wZGYiKTsKCQkJCQkJCQkkdGh1bWIgPSBzdHJfcmVwbGFjZSgkZXh0ZW5zaW9ucywkdGh1bWJfcmVwbGFjZSwkbGluayk7CgkJCQkJCQl9CgoJCQkJCQkJJGltZ2xpbmsgPSAiIjsKCQkJCQkJCQkkdGh1bWIgPSBzdHJ0b2soJHRodW1iLCAnPycpOwoJCQkJCQkJCWlmIChmaWxlX2V4aXN0cygkdGh1bWIpICYmICR0aHVtYiAhPSAkbGluaykgewoJCQkJCQkJCQkkaW1nbGluayA9ICc8YSBocmVmID0iJy4kbGluay4nIiBhcmlhLWhpZGRlbj0idHJ1ZSI+PGltZyBzcmM9IicuJHRodW1iLiciIGFsdD0iU3ltYm9sIGRlciBTZWl0ZSAiLz4gPC9hPiAnOwoJCQkJCQkJCX0KCgkgICAgICAgICAgICAgICAgCQkkdHJlZmZfYW56PSIiOwoJICAgICAgICAgICAgICAgICAgCQlpZigkdHJlZmZlciAmJiAkdGVzdD49MSkgJHRyZWZmX2Fuej0iPHNwYW4gY2xhc3M9J3RyZWZmZXInPlsiLiR0ZXN0LiImbmJzcDsiLiR0cmVmZi4iXTwvc3Bhbj4iOwoKCQkJCQkvLyBzbyBrYW5uIG1hbiBhbHBoYWJldGlzY2ggc29ydGllcmVuOiAoTmVnZXJ0cmljaykKCQkJCQlpZiAoaXNzZXQoJGFscGhhc29ydCkgJiYgJGFscGhhc29ydCA9PT0gdHJ1ZSkgeyR0ZXN0ID0gJHRpdGVsO30KCgkJCQkJLy8gVHJlZmZlciBiZWkgb3IgbnVyIGVpbm1hbCBhdWZsaXN0ZW4KCQkJCQlpZiAoIWluX2FycmF5KCRsaW5rLCAkYmVyZWl0c19mb3VuZCkpIHsKCQkJCQkJaWYgKCRvciA9PT0gdHJ1ZSkgeyRiZXJlaXRzX2ZvdW5kW10gPSAkbGluazt9IAoKICAgICAgICAgICAgICAgICAgICAgIAkJCWlmICgkcGZhZCB8fCAkYWVuZF9kYXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgCQkJaWYgKCRpZnJhbWUgIT09IHRydWUpIHsgCiAgICAgICAgICAgICAgICAgICAgICAgICAJCQkJJGFycmF5IC49ICR0ZXN0LiRpbWdsaW5rLiI8YSBocmVmPVwiIi4kbGluay4iXCIiLiR6aWVsLiI+Ii4kdGl0ZWwuIjwvYT4gIi4kbGlzdF9oeF9lbmQuJHRyZWZmX2Fuei4kcmVzdC4iPHNwYW4gY2xhc3M9J21vZCc+Ii4kdXJsLiI8L3NwYW4+Ii4kbW9kLiJcbiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIAkJCX0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIAkJCQkkYXJyYXkgLj0gIiRsaW5rXG4iOwogICAgICAgICAgICAgICAgICAgICAgIAkJCQl9CiAgICAgICAgICAgICAgICAgICAgIAkJCX0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIAkJCWlmICgkaWZyYW1lICE9PSB0cnVlKSB7IAogICAgICAgICAgICAgICAgICAgICAgICAgCQkJCSRhcnJheSAuPSAkdGVzdC4kaW1nbGluay4iPGEgaHJlZj1cIiIuJGxpbmsuIlwiIi4kemllbC4iPiIuJHRpdGVsLiI8L2E+ICIuJGxpc3RfaHhfZW5kLiR0cmVmZl9hbnouJHJlc3QuIlxuIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAJCX0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgCQkJCQkkYXJyYXkgLj0gIiRsaW5rXG4iOwogICAgICAgICAgICAgICAgICAgICAgICAgCQkJfQogICAgICAgICAgICAgICAgICAgICAgICAJCX0KCQkJCQkJJGZvdW5kICsrOwoJCQkJCX0KCgoJICAgICAgICAgICAgICAgCQkJLy8kZm91bmQgKys7CgoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJfQoJfQoJfQoJCglAY2xvc2VkaXIoJHZlcnopOwoKCX0KZWNobyAnPC9wPic7CmlmICgkc2VhcmNoID09ICLCp2ZvdW5kIikge2VjaG8gJyYjODM7dSYjOTk7aCYjMTE1O2MmIzExNDtpJiMxMTI7dCAmIzE2OTsgMiYjNDg7MDUgJiMxMTk7ZSYjOTg7ZCYjMTAxO3MmIzEwNTtnbiYjNDY7JiMxMTllJiMxMDU7cyYjMTE1O2gmIzk3O3ImIzExNjsmIzQ2OyYjMTAwO2UnO2V4aXQ7fQoKCi8vIExvZ2RhdGVpIHNjaHJlaWJlbiB1bmQgQmVuYWNocmljaHRpZ3VuZ3MtTWFpbCBtaXQgaXAgLSBTcGVycmU6Ci8vIGJhc2U2NCBzY2hyZWlidCAyIExvZ2VpbnRyYWVnZSEKCmZ1bmN0aW9uIHNjaHJlaWJlbigkZGF0ZWksJG1vZGUpewoJZ2xvYmFsICRzZWFyY2g7CgkkZnAgPSBAZm9wZW4oJGRhdGVpLCRtb2RlKTsKCWZsb2NrKCRmcCxMT0NLX0VYKTsKCWZ3cml0ZSgkZnAsJF9TRVJWRVJbIlJFTU9URV9BRERSIl0uInwiLnRpbWUoKS4ifCIuJHNlYXJjaC4iXG4iKTsKCWZsb2NrKCRmcCxMT0NLX1VOKTsKCWZjbG9zZSgkZnApOwp9CgoKZnVuY3Rpb24gaXBfc3BlcnJlKCkgewoJZ2xvYmFsICRzZWFyY2gsICRyZWxvYWRsaW1pdCwgJGluc3RhbGxhdGlvbl9wYXRoOwoJJHJlbG9hZGxvZ2RhdGVpID0gJGluc3RhbGxhdGlvbl9wYXRoLicvcmVsb2FkLnR4dCc7CgkkYW56YWhsZWludHJhZWdlID0gMTAwOwoKCS8vIFBydWVmZW4sIG9iIHJlbG9hZGRhdGVpIGV4aXN0aWVydCA9PiBhbnNvbnN0ZW4gRXJzdGVsbGVuCgoJaWYoIWZpbGVfZXhpc3RzKCRyZWxvYWRsb2dkYXRlaSkpIHsKCQkkZGF0ZWkgPSBmb3BlbigkcmVsb2FkbG9nZGF0ZWksIncrIik7CgkJZmNsb3NlKCRkYXRlaSk7Cgl9CgoJJGZwID0gZmlsZSgkcmVsb2FkbG9nZGF0ZWkpOwoJJHNpemUgPSBzaXplb2YoJGZwKTsKCSRhdXNnYWJlID0gZmFsc2U7CgkvLyBEYXRlaSBzY2hyZWliZW4sIHdlbm4gTGlzdGUgdm9sbDoKCWlmKCRzaXplID49ICRhbnphaGxlaW50cmFlZ2UpewoJCXNjaHJlaWJlbigkcmVsb2FkbG9nZGF0ZWksInciKTsKCgkvLyBQcnVlZmVuLCBvYiBlaW5lIElQIGluIGRlciBMaXN0ZSBzdGVodAoJfSBlbHNlIHsKCQlmb3IgKCRpPTA7JGk8JHNpemU7JGkrKykgewogICAgICAJCSR6ZWlsZSA9IGV4cGxvZGUoInwiLCRmcFskaV0pOwoKCQkJaWYgKCR6ZWlsZVsxXSA+IHRpbWUoKS0zIHx8CgkJCSR6ZWlsZVswXSA9PSAkX1NFUlZFUlsiUkVNT1RFX0FERFIiXSAmJiAkemVpbGVbMV0gPiB0aW1lKCktNiB8fAoJCQkkemVpbGVbMF0gPT0gJF9TRVJWRVJbIlJFTU9URV9BRERSIl0gJiYgdHJpbSgkemVpbGVbMl0pID09ICRzZWFyY2ggJiYgJHplaWxlWzFdID4gKHRpbWUoKS0kcmVsb2FkbGltaXQpKSB7IC8vIGdsZWljaGUgSVAsIHJlbG9hZGxpbWl0IHVuZCBnbGVpY2hlciBTdWNoYmVncmlmZgoJCQkJJGF1c2dhYmUgPSB0cnVlOwogICAgICAJCX0KCQl9CgkJLy8gUHJvdG9rb2xsaWVydCBkaWUgSVAtQWRyZXNzZSAoc2NocmVpYnQpOgoJCXNjaHJlaWJlbigkcmVsb2FkbG9nZGF0ZWksImErIik7Cgl9CgoKCXJldHVybiBAJGF1c2dhYmU7Cn0KCi8vIGpldHp0IExvZ2ZpbGUgdW5kIEJlbmFjaHJpY2h0aWd1bmdzLU1haWwgc2NocmVpYmVuOgoKaWYoaXBfc3BlcnJlKCk9PT1mYWxzZSkgewoKCS8vIEJlbmFjaHJpY2h0aWd1bmdzIE1haWw6CglpZihtYl9kZXRlY3RfZW5jb2RpbmcoJHNlYXJjaCwgJ1VURi04LCBJU08tODg1OS0xJykgPT09ICdVVEYtOCcpIHsKCQkkc3VjaGJlZ3JpZmZfbWFpbCA9IGh0bWxzcGVjaWFsY2hhcnMoJHNlYXJjaCwgRU5UX05PUVVPVEVTLCAiVVRGLTgiKTsKCQkkc3VjaGJlZ3JpZmZfbG9nID0gdXRmOF9kZWNvZGUoJHN1Y2hiZWdyaWZmX21haWwpOwovLwkJJGhlYWRlcnMgPSAiQ29udGVudC1UeXBlOiB0ZXh0L3BsYWluOyBjaGFyc2V0PVVURi04IjsJCQoJfSBlbHNlIHsKCQkkc3VjaGJlZ3JpZmZfbWFpbCA9IGh0bWxzcGVjaWFsY2hhcnMoJHNlYXJjaCwgRU5UX05PUVVPVEVTLCAiSVNPLTg4NTktMTUiKTsKCQkkc3VjaGJlZ3JpZmZfbG9nID0gJHNlYXJjaDsKCX0KCQoJJGhlYWRlciA9ICdGcm9tOiAnLiRhZG1pbmFkZHJlc3MuJycgLiAiXHJcbiIgLidYLU1haWxlcjogUEhQLycgLiBwaHB2ZXJzaW9uKCk7CgkKCWlmKCRtYWlsID09IHRydWUgJiYgJHNlYXJjaCAhPSAkdmFsdWUpIHsKCQlpZiAoISRzZW5kZXIpIHskc2VuZGVyID0gIlN1Y2hzY3JpcHQiO30KLy8JCW1haWwoJGFkbWluYWRkcmVzcywiU3VjaGUgYXVmICRzZWl0ZSIsIkZvbGdlbmRlciBCZWdyaWZmIHd1cmRlIHNvZWJlbiBhdWYgZGVyIFNlaXRlICRzZWl0ZSBnZXN1Y2h0OiBcbiRzdWNoYmVncmlmZl9tYWlsXG5UcmVmZmVyOiAkZm91bmQiLCRzZW5kZXIsJGhlYWRlcnMpOwoJCW1haWwoJGFkbWluYWRkcmVzcywiU3VjaGUgYXVmICRzZWl0ZSIsIiRzZW5kZXIgXG5cbkZvbGdlbmRlciBCZWdyaWZmIHd1cmRlIHNvZWJlbiBhdWYgZGVyIFNlaXRlICRzZWl0ZSBnZXN1Y2h0OiBcbiRzdWNoYmVncmlmZl9tYWlsXG5UcmVmZmVyOiAkZm91bmQiLCRoZWFkZXIpOwoJfQoKCS8vIExvZ2ZpbGUgc2NocmVpYmVuOgoJJHRvZGF5ID0gZGF0ZSgiZC5tLiBIOmkgIik7CgkkbmwgPSAkdG9kYXkuJHN1Y2hiZWdyaWZmX2xvZy4iKCIuJGZvdW5kLiIpXG4iOwoJJGxpbmVzID0gZmlsZSgkaW5zdGFsbGF0aW9uX3BhdGguJy9zZWFyY2hsb2cudHh0Jyk7CgkkbGluZXMgPSBhcnJheV91bmlxdWUoJGxpbmVzKTsgLy8gRHVwbGlrYXRlIGxvZXNjaGVuCgoJLy8gV2VubiBtZWhyIGFscyAkbWF4bXNnIChkZWZhdWx0OjEwMCkgTG9nZWludHJhZWdlIGFlbHRlc3RlIGxvZXNjaGVuOgoJLy8gJG1heG1zZyA9IDEwMDsKCWlmKGNvdW50KCRsaW5lcykgPiAkbWF4bXNnKSB1bnNldCgkbGluZXNbMF0pOwoKCSRubCA9IGltcGxvZGUoIiIsICRsaW5lcykuJG5sOwoKIAoJJGZwMiA9IGZvcGVuKCRpbnN0YWxsYXRpb25fcGF0aC4nL3NlYXJjaGxvZy50eHQnLCAnd2InKTsKCWZsb2NrKCRmcDIsTE9DS19FWCk7Cglmd3JpdGUoJGZwMiwgJG5sKTsKCWZsb2NrKCRmcDIsTE9DS19VTik7CglmY2xvc2UoJGZwMik7Cn0KCgoKCWlmKCRmb3VuZCA9PSAiMCIpCXsKCQllY2hvICRub3Jlc3VsdDsKCQlpZiAoc3RybGVuKCRzZWFyY2gpID4gJGxlbmd0aCAmJiAkdm9yc2NobGFnICE9ICIiKSB7IAoKCQkJJHN5biA9IHN0cl9yZXBsYWNlKCcmcXVvdDsnLCcnLCRzZWFyY2gpOwoJCQkkc3luID0gc3RyX3JlcGxhY2UoJyInLCcnLCRzZWFyY2gpOwoJCQoJCQlpZiAoc3RycG9zKHN0cnRvbG93ZXIoJGVuY29kaW5nKSwidXRmIikhPT0gZmFsc2UpIHsKCQkJCSRzeW4gPSBtYl9zdWJzdHIodHJpbSgkc3luKSwwLCRsZW5ndGgsJ3V0Zi04Jyk7CgkJCX0gZWxzZSB7CgkJCQkkc3luID0gc3Vic3RyKHRyaW0oJHN5biksMCwkbGVuZ3RoKTsKCQkJfQoKCQkJZWNobyAiPHA+JHZvcnNjaGxhZyA8YSBocmVmID1cIiIuIGJhc2VuYW1lKCRfU0VSVkVSWydQSFBfU0VMRiddKS4iP3E9JHN5biZhbXA7Z2VnZW49JmFtcDtkYXRlPSIudGltZSgpLiJcIj4kc3luPC9hPi48L3A+IjsKCQl9Cgl9CgoJaWYoJGZvdW5kID09ICIxIiAmJiAkanVtcCA9PSB0cnVlICYmICRfU0VSVkVSWydQSFBfU0VMRiddICE9IHN1YnN0cigkbGluaywxKSkJeyAvL2RhcyBTdWNoc2NyaXB0IHNlbGJzdCBkYXJmIG5pY2h0IGFuZ2VzcHJ1bmdlbiB3ZXJkZW46IEVuZGxvc3NjaGxlaWZlCiAgCQkkbGluayA9IHN1YnN0cigkbGluaywxKTsJLy9kZW4gUHVua3Qgdm9yIGRlbSBkaXIgd2VnCgkJJGxpbmsgPSBzdHJfcmVwbGFjZSgnP3E9Jy4kc2VhcmNoLCcnLCRsaW5rKTsKCgkJJHNlYXJjaCA9IHN0cl9yZXBsYWNlKCcmcXVvdDsnLCciJywkc2VhcmNoKTsgLy8gd2VnZW4gc2VhcmNodGVybS5qcwoJCQoJCS8vIGRvcHBlbHRlIHNsYXNoIHZvciBEYXRlaW5hbWVuIHVudGVyZHJ1ZWNrZW4KCQkkZGlybmFtZSA9IGRpcm5hbWUoJF9TRVJWRVJbJ1BIUF9TRUxGJ10pOwoJCWlmKCRkaXJuYW1lID09ICIvIikgJGRpcm5hbWUgPSAiIjsKCQkvLyBiYWNrc2xhc2ggdm9uIFdpbmRvd3MgU2VydmVybiByYXVzOgoJCSRkaXJuYW1lID0gc3RyX3JlcGxhY2UoIlxcIiwiIiwkZGlybmFtZSk7CgoKCgkJaWYgKGlzc2V0KCRxdWVyeSkpewoJCQloZWFkZXIoIkxvY2F0aW9uOiAvLyIuJF9TRVJWRVJbJ0hUVFBfSE9TVCddLiRkaXJuYW1lLiIvIi4kbGlua19hbnouIiZxPSIuJHNlYXJjaCk7CgkJfSBlbHNlIHsKCQkJaGVhZGVyKCJMb2NhdGlvbjogLy8iLiRfU0VSVkVSWydIVFRQX0hPU1QnXS4kZGlybmFtZS4kbGlua19hbnouIj9xPSIuJHNlYXJjaCk7CgkJfQoJCWV4aXQ7CgoJfQoKCWlmKCRmb3VuZCA+ICIxIikgewogICAgICAgICRuID0gJHBsdXJhbDsgJGUgPSAiZSI7ICRzID0gInMiOwoJfSBlbHNlIHsKICAgIAkkZSA9ICRuID0gJHMgPSAiIjsKCX0KCglpZigkZm91bmQgPj0gIjEiKSB7CgoJCSRhcnJheSA9IGV4cGxvZGUoIlxuIiwgJGFycmF5KTsKCQlpZiAoaXNzZXQoJGFscGhhc29ydCkgJiYgJGFscGhhc29ydCA9PT0gdHJ1ZSkgewoJCQlzb3J0KCRhcnJheSk7CgkJfSBlbHNlIHsKCQkJbmF0c29ydCgkYXJyYXkpOwoJCX0KCQlyZXNldCgkYXJyYXkpOwoJCWlmICghaXNzZXQoJHJldmVyc2Vzb3J0KSkgeyRhcnJheSA9IGFycmF5X3JldmVyc2UoJGFycmF5KTt9CgogICAgICAkaSA9ICRhbnpfZGF0OwoKCiAgICAgIC8vIGFuc3RlbGxlIGRlciB3aGlsZSBlaW4gZm9yIFNjaGxlaWZlLCB3ZW5uIGljaCB3ZWl0ZXJlIFNlaXRlbiBhbnplaWdlbiB3aWxsOgogICAgICAkbmV4dD0wOwogICAgICBpZihpc3NldCgkX0dFVFsibmV4dCJdKSB8fCBpc3NldCgkX1BPU1RbIm5leHQiXSkpIHsKICAgICAgICAgICAgaWYgKGlzc2V0KCRfR0VUWyJuZXh0Il0pICYmICRfR0VUWyJuZXh0Il0gIT0gIiIpICRuZXh0ID0gJF9HRVRbIm5leHQiXTsKICAgICAgICAgICAgaWYgKGlzc2V0KCRfUE9TVFsibmV4dCJdKSAmJiAkX1BPU1RbIm5leHQiXSAhPSAiIikgJG5leHQgPSAkX1BPU1RbIm5leHQiXTsKICAgICAgfQogICAgICAKICAgICAgJG5leHQxPSRuZXh0KzE7CiAgICAgICR3ZWl0ZXI9JG5leHQrJGFuel9kYXQ7CiAgICAgIGZvcigkY291bnQgPSAwICsgJG5leHQ7ICRjb3VudCA8ICRhbnpfZGF0ICsgJG5leHQ7ICRjb3VudCsrKSB7CiAgICAgICAgIGlmICgkaWZyYW1lICE9PSB0cnVlKSB7IAoKCiAgICAgICAgICAgIGlmIChAJGFycmF5WyRjb3VudF0pICRhdXNnYWJlIC49ICI8bGk+Ii4kbGlzdF9oeF9zdGFydC5zdWJzdHIoc3Ryc3RyKCRhcnJheVskY291bnRdLCAnPGEgaHJlZicpLDApLiI8L2xpPlxuIjsKICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKEAkYXJyYXlbJGNvdW50XSkgJGF1c2dhYmUgLj0gIjxpZnJhbWUgY2xhc3M9J3NlYXJjaGlmcmFtZScgc3JjPSciLiRhcnJheVskY291bnRdLiInPjwvaWZyYW1lPlxuIjsKICAgICAgICAgfQoJCiAgICAgIH0KCQoJCglpZiAoIWlzc2V0KCRmb3VuZHR4dDEpKXskZm91bmR0eHQxID0gIklociBTdWNoYmVncmlmZiB3dXJkZSAiO30KCWlmICghaXNzZXQoJGZvdW5kdHh0MikpeyRmb3VuZHR4dDIgPSAiU2VpdGUiO30KCWlmICghaXNzZXQoJGZvdW5kdHh0MykpeyRmb3VuZHR4dDMgPSAiIGdlZnVuZGVuLiI7fQoJJGxlZXIgPSAiICI7CglpZiAoJGZvdW5kdHh0MyA9PSIiKSB7JGxlZXIgPSAiIjt9CgoJCWVjaG8gJzxwPicuJGZvdW5kdHh0MS4nPHN0cm9uZz4gJy4kZm91bmQuJyA8L3N0cm9uZz4nLiRmb3VuZHR4dDIuJG4uJGxlZXIuJGZvdW5kdHh0MzsKCiAgICAgIGlmICgkbmV4dCA9PSAwKSB7CiAgICAgICAgICAgIGlmICgkYW56X2RhdCA8ICRmb3VuZCkgewogICAgICAJCQlpZiAoaXNzZXQoJGFuZ2V6ZWlndHR4dCkpewogICAgICAgICAJCQkJZWNobyAkYW5nZXplaWd0dHh0OwogICAgICAJCQl9IGVsc2UgewogICAgICAgICAJCQkJZWNobyAiPGJyIC8+QW5nZXplaWd0IHdlcmRlbiA8c3Ryb25nPiRhbnpfZGF0PC9zdHJvbmc+IEVyZ2Vibmlzc2UgcHJvIFNlaXRlIjsKICAgICAgCQkJfQogICAgICAJCX0KCi8vICAgICAgCQlpZigkdHJlZmZlciAmJiAkZm91bmQgPiAxICYmICRvciA9PT0gZmFsc2UpIHsgCgkgICAgICAJaWYoJHRyZWZmZXIgJiYgJGZvdW5kID4gMSkgeyAKICAgICAgCQkJaWYgKGlzc2V0KCRzb3J0dHh0KSl7CiAgICAgIAkJCQkkc29ydGhpbndlaXMgPSAkc29ydHR4dDsKICAgICAgCQkJfSBlbHNlIHsKICAgICAgCQkJCSRzb3J0aGlud2VpcyA9ICIsIHNvcnRpZXJ0IG5hY2ggW0FuemFobCZuYnNwO2RlciZuYnNwO1RyZWZmZXImbmJzcDtwcm8mbmJzcDtEb2t1bWVudF0iOwogICAgICAJCQl9CiAgICAgIAkJfSAKCQkJZWNobyAiJHNvcnRoaW53ZWlzLiI7CiAgICAgIH0KICAgICAgZWNobyAiPC9wPiI7CgovLyBOZXVlcyBGZW5zdGVyCmlmICgkdGFyZ2V0ID09ICIiICYmICR0YXJnZXR3YWhsID09IHRydWUpIHsKZWNobycKPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgovKiA8IVtDREFUQVsgKi8KaWYoZG9jdW1lbnQuY29va2llLmluZGV4T2YoXCdzdWNob2VmZm5lblwnKSAhPT0gLTEpewogICBhZGRFdmVudCh3aW5kb3csIFwnbG9hZFwnLCBsaW5rb3BlbmVyKTsKICAgZG9jdW1lbnQud3JpdGUgKFwnPGZvcm0gYWN0aW9uPSIiPjxwIGNsYXNzPSJsaW5rb3BlbmVyIj48aW5wdXQgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9ImNoZWNrZWQiIG9uY2hhbmdlPSJsaW5rY29va2llKCkiIG9uY2xpY2s9ImxpbmtvcGVuZXIodGhpcy5jaGVja2VkKSIgaWQ9ImxpbmtzbmV3d2luMSIgLz4gPGxhYmVsIGZvcj0ibGlua3NuZXd3aW4xIj5UcmVmZmVyIGluIG5ldWVtIEZlbnN0ZXIgJm91bWw7ZmZuZW4/IDxcL2xhYmVsPjxcL3A+PFwvZm9ybT5cJyk7Cn0gZWxzZSB7CiAgIGRvY3VtZW50LndyaXRlIChcJzxmb3JtIGFjdGlvbj0iIj48cCBjbGFzcz0ibGlua29wZW5lciI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBvbmNoYW5nZT0ibGlua2Nvb2tpZSgpIiBvbmNsaWNrPSJsaW5rb3BlbmVyKHRoaXMuY2hlY2tlZCkiIGlkPSJsaW5rc25ld3dpbjEiIC8+IDxsYWJlbCBmb3I9ImxpbmtzbmV3d2luMSI+VHJlZmZlciBpbiBuZXVlbSBGZW5zdGVyICZvdW1sO2ZmbmVuPyA8XC9sYWJlbD48XC9wPjxcL2Zvcm0+XCcpOwp9Ci8qIF1dPiAqLwo8L3NjcmlwdD4KJzsKfQoKICAgICAgICAgICAgJGxpc3RfYXJ0PSJ1bCI7CiAgICAgICAgICAgIGlmICgkbnVtX2xpc3QpJGxpc3RfYXJ0PSJvbCBzdGFydD0kbmV4dCI7CgogICAgICAgICAgICAvLyB1bSBYTUwgRmVobGVyIChIVE1MIFRpZHkgV2FybnVuZ2VuKSB6dSB1bnRlcmJpbmRlbjoKICAgICAgICAgICAgLy8gaHR0cDovL3d3dy50aW1yZWV2ZXMuZGUvbmV1L3dlYmRlc2lnbi93ZWItMjAucGhwCiAgICAgICAgICAgICRzdWNobXVzdGVyID0gJy8mKD8hKFthLXpBLVpdezIsN318I1xkK3wjeFswLTlhLWZBLUZdKyk7KS9pJzsKICAgICAgICAgICAgJGVyc2V0enVuZyA9ICcmYW1wOyc7CiAgICAgICAgICAgICRhdXNnYWJlID0gcHJlZ19yZXBsYWNlKCRzdWNobXVzdGVyLCAkZXJzZXR6dW5nLCAkYXVzZ2FiZSk7CgogICAgICAgICAgICBpZiAoJGlmcmFtZSAhPT0gdHJ1ZSkgeyAKICAgICAgICAgICAgICAgaWYgKCRudW1fbGlzdCkgewogICAgICAgICAgICAgICAgICBlY2hvICJcbjxvbCBzdGFydD0nIi4kbmV4dDEuIic+XG4iLiRhdXNnYWJlLiI8L29sPlxuIjsKICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZWNobyAiXG48dWw+XG4iLiRhdXNnYWJlLiI8L3VsPlxuIjsKICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICBlY2hvICJcbiIuJGF1c2dhYmUuIlxuIjsKICAgICAgICAgICAgfQoKLy8gICAgICBpZiAoJG5leHQgPCAoJGZvdW5kIC0gJGFuel9kYXQpKSB7CiAgICAgIAogICAgICAgICBpZiAoJG1ldGhvZCA9PSAiR0VUIikgewogICAgICAgICAgICAvL25leHQgcmF1cywgd2VpbHMgc29uc3QgeC1tYWwgYW5nZWhhZW5ndCB3aXJkOgogICAgICAgICAgICAkcXVlcnlzdHJpbmcgPSAiIjsKICAgICAgICAgICAgaWYoaXNzZXQoJF9TRVJWRVJbIlFVRVJZX1NUUklORyJdKSkgeyAKICAgICAgICAgICAgICAgJHF1ZXJ5c3RyaW5nID0gJF9TRVJWRVJbIlFVRVJZX1NUUklORyJdOyAKICAgICAgICAgICAgICAgJGZpcnN0cXVlcnkgPSBzdHJwb3MoJHF1ZXJ5c3RyaW5nLCImbmV4dCIpOwogICAgICAgICAgICAgICBpZiAoJGZpcnN0cXVlcnkgIT09IGZhbHNlKSB7IAogICAgICAgICAgICAgICAgICAkcXVlcnlzdHJpbmcgPSBzdWJzdHIoJHF1ZXJ5c3RyaW5nLDAsJGZpcnN0cXVlcnkpOyAKICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgkJCQoJCQkkcHJldmlvdXMgPSAkd2VpdGVyIC0gKCRhbnpfZGF0ICogMik7IAoJCQkKICAgICAgICAgICAgJHF1ZXJ5c3RyaW5nID0gc3RyX3JlcGxhY2UoIiYiLCImYW1wOyIsJHF1ZXJ5c3RyaW5nKTsKICAgICAgICAgICAgCgkJCWVjaG8gJzxwIGNsYXNzPSJ3ZWl0ZXIiPic7CgkJCQoJCQlpZiAoJG5leHQgPj0gJGFuel9kYXQpIHsgCgkJCQllY2hvICc8YSBocmVmPSInLmJhc2VuYW1lKCRfU0VSVkVSWyJQSFBfU0VMRiJdKS4nPycuJHF1ZXJ5c3RyaW5nLicmYW1wO25leHQ9Jy4kcHJldmlvdXMuJyI+Jy4kenVydWVja3R4dC4nPC9hPic7CgkJCX0KCQkJCgkJCWlmICgkbmV4dCA+PSAkYW56X2RhdCAmJiAkbmV4dCA8ICgkZm91bmQgLSAkYW56X2RhdCkpIHsKCQkJCWVjaG8gJyB8ICc7CgkJCX0KCQkJCgkJCWlmICgkbmV4dCA8ICgkZm91bmQgLSAkYW56X2RhdCkpIHsKCQkJCWVjaG8gJzxhIGhyZWY9IicuYmFzZW5hbWUoJF9TRVJWRVJbIlBIUF9TRUxGIl0pLic/Jy4kcXVlcnlzdHJpbmcuJyZhbXA7bmV4dD0nLiR3ZWl0ZXIuJyI+Jy4kd2VpdGVydHh0Lic8L2E+JzsKCQkJfQoJCQllY2hvJzwvcD4nOwogICAgICAgICB9Ci8vICAgICAgfQoJfQp9CmVsc2Uge2VjaG8gJG1pbmxlbmd0aDt9Cn0KCmlmKCRmb3VuZCA+PSAiMSIgfHwgIWlzc2V0KCRfR0VUWyJxIl0pICkgewoJJHVsc3RhcnQgPSAiJHNlYXJjaHRpcDA8ZGl2IGlkPSdzdWNodGlwcHMnICBjbGFzcz0na2xhcHBlbicgPlxuPHVsPlxuIjsKfSBlbHNlIHsKCSR1bHN0YXJ0ID0gIiRzZWFyY2h0aXAwPGRpdiBpZD0nc3VjaHRpcHBzJyA+XG48dWw+XG4iOwkKfQoKJHVsZW5kID0gIjwvdWw+XG48L2Rpdj5cbiI7CgppZiAoJHRpcHBzKSB7JHNlYXJjaHRpcCA9ICR1bHN0YXJ0LiRzZWFyY2h0aXAxLiRzZWFyY2h0aXAyLiRzZWFyY2h0aXAzLiRzZWFyY2h0aXAzMS4kc2VhcmNodGlwM29yLiRzZWFyY2h0aXA0LiR1bGVuZDsgfWVsc2UgeyRzZWFyY2h0aXAgPSIiO30KCgplY2hvICRzZWFyY2h0aXA7CgokbXRpbWUgPSBtaWNyb3RpbWUoKTsgJG10aW1lID0gZXhwbG9kZSggJyAnLCAkbXRpbWUpOyAkbXRpbWUgPSAkbXRpbWVbMV0gKyAkbXRpbWVbMF07CiRzdWNoX2VuZGUgPSAkbXRpbWU7CiR0aW1lX2dlc2FtdCA9ICRzdWNoX2VuZGUgLSAkc3VjaF9zdGFydDsKCmVjaG8gIjxkaXYgaWQ9XCJzZWFyY2hmb290ZXJcIj48cD4iOwoKaWYgKGlzc2V0KCRhbnphaGxkYXQpKXsKCSR6ZGF0ID0gJGFuemFobGRhdDsKCX0gZWxzZSB7CgkkemRhdCA9ICJBbnphaGwgZHVyY2hzdWNodGVyIERhdGVpZW46ICI7Cn0KCmlmICgkemFobHplaWcgJiYgJGZvdW5kID4gMCkgZWNobyAkemRhdC4kZHVyY2hzdWNodC4iPGJyIC8+IjsKCmlmICgkZm91bmQgPiAwICkgewoJaWYgKGlzc2V0KCR0aW1ldHh0KSl7CgkJJHRpbWVoaW53ZWlzID0gJHRpbWV0eHQ7Cgl9IGVsc2UgewoJCSR0aW1laGlud2VpcyA9ICJTdWNoZSBhdXNnZWYmdXVtbDtocnQgaW4gIjsKCX0KCglpZigkZGF1ZXIpIHsKCSAgICAgIGVjaG8gIiR0aW1laGlud2VpcyIubnVtYmVyX2Zvcm1hdCgkdGltZV9nZXNhbXQsMiwnLCcsJy4nKS4iICRzdWNoZGF1ZXIgJHZlcnNpb25cbiI7Cgl9IGVsc2UgewoJICAgICAgZWNobyAiXG4kdmVyc2lvblxuIjsKCX0KfSBlbHNlIHsKICAgICAgZWNobyAiXG4kdmVyc2lvblxuIjsKfQplY2hvICI8L3A+PC9kaXY+IjsKZWNobyAkd2R3Owo=";@eval(base64_decode($NCiR0aW1lX29sZCA9IDA7IC8vIGb8ciBkaWUgRm9ydHNjaHJpdHRzYW56ZWlnZQNCiR0aW1lX29sZCA9IDA7IC8vIGb8ciBkaWUgRm9ydHNjaHJpdHRzYW56ZWlnZQ));?>